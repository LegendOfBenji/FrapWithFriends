define("responsive",["has","nbd/util/media"],function(e,t){"use strict";function n(){if(!o){try{t({desktop:"all"})}catch(e){var n=window.innerWidth<604?"phone":window.innerWidth<1025?"tablet":"desktop";t.is=function(e){return e===n},t.getState=function(e){return e?t.is(e):[n]},t.trigger(n+" "+n+":enter",!0)}e("touch")&&window.scrollTo(0,1),o=!0}}function i(){}var o;return{init:n,destroy:i}}),define("be/View/Follow",["jquery","nbd/View"],function(e,t){"use strict";var n=t.extend({init:function(e,t){this.$view=e,this._model=t,this.rendered()},destroy:function(){this._model.off(null,null,this)},rendered:function(){var t=this;this._model.on("following",function(t){this.$view.toggleClass("following",t),t&&this.$view.addClass("following-hold").one("mouseleave",function(){e(this).removeClass("following-hold")})},this),this.$view.on("click",function(){var n=e(this).data(),i={backfill:n.backfill};t._controller.follow(i)})},updateCount:function(e){var t=this.$view.parent().find(".gallery-stats-followers-count"),n=+t.html()+e;t.html(n>0?n:0)}});return n}),define("lib/gaq",{page:function(e){try{void 0!==_gaq&&_gaq.push(["_trackPageview",e||location.href])}catch(e){}},event:function(e,t,n,i,o){try{if("undefined"!=typeof _gaq){var r=Array.prototype.slice.call(arguments);r.unshift("_trackEvent"),_gaq.push(r)}}catch(e){}},customVar:function(e,t,n,i){if(e&&t&&void 0!==n)try{if("undefined"!=typeof _gaq){var o=Array.prototype.slice.call(arguments);o.unshift("_setCustomVar"),_gaq.push(o)}}catch(e){}}}),define("lib/xhr",["jquery","nbd/trait/promise"],function(e,t){"use strict";return function(){var n,i=new t,o=e.ajax.apply(e,arguments);return i.resolve(o),n=i.thenable(),n.abort=o.abort,n}}),define("be/Controller/Follow",["jquery","nbd/Controller","nbd/Model","be/View/Follow","lib/gaq","lib/xhr"],function(e,t,n,i,o,r){"use strict";var s=t.extend({init:function(e,t,i){this.views=[],this.type=i||"user",this._model=new n(e,{blocking:!1,following:t||!1})},_initView:function(e){var t=new i(e,this._model);return t._controller=this,t},add:function(e){if(e.data("befollow"))return this;var t=this._initView(e);return e.data("befollow",t),this.views.push(t),this},update:function(e){var t=e?1:-1;this.views.forEach(function(e){e.updateCount(t)})},follow:function(e){function t(){n.set("blocking",!1)}if(!this._model.get("blocking")){var n=this._model,i=this._model.get("following"),s=(this.constructor.DATA_KEY[this.type],this.constructor.url(this.type,this._model.id())),a=i?"DELETE":"POST";return this._model.set("blocking",!0),r({url:s,type:a,data:e}).then(function(e){e&&e.valid&&(n.set("following",!i),o.event("follow",window.location.pathname,window.location.search))}).then(t,t)}},destroy:function(){this.views.forEach(function(e){e.destroy()}),this.views=[],this._model.destroy(),this._model=null}},{RELATIONS_URL:"/relations",DATA_KEY:{user:"followee",collection:"list_id",site:"site_id"},url:function(e,t){return this.RELATIONS_URL+"/"+e+"/"+t}});return s}),define("be/follow",["jquery","nbd/util/extend","nbd/trait/pubsub","be/Controller/Follow"],function(e,t,n,i){"use strict";var o={users:{},collections:{},sites:{}},r=function(e,t,n){var o=new i(t,n,e);return this.listenTo(o._model,"following",function(e){this.trigger("following",t,e)}),o},s=function(e,t,n,i){var s=e.data(t)||+e.attr(t);s&&(o[i][s]=(o[i][s]||r.call(a,n,s,e.hasClass("following"))).add(e))},a={init:function(e){this.users(e),this.collections(e),this.sites(e)},users:function(t){var n=this;e(".action-follow-user",t).each(function(){n.followUser(e(this))})},collections:function(t){var n=this;e(".action-follow-collection",t).each(function(){n.followCollection(e(this))})},sites:function(t){var n=this;e(".action-follow-site",t).each(function(){n.followSite(e(this))})},followUser:function(e){s(e,"followee","user","users")},followCollection:function(e){s(e,"list_id","collection","collections")},followSite:function(e){s(e,"site_id","site","sites")},getUser:function(e){return o.users[e]},getCollection:function(e){return o.collections[e]},getSite:function(e){return o.sites[e]},usersFollowed:function(){return Object.keys(o.users).filter(function(e){return o.users[e]._model.get("following")}).length}};return t(a,n),a}),define("lib/social",["jquery"],function(e){"use strict";return{init:function(e){this.twitter(e),this.facebook(e),this.linkedin(e),this.pinterest(e),this.stumbledupon(e)},twitter:function(t){e(".viral-button-twitter",t).length&&require(["//platform.twitter.com/widgets.js"],function(){try{twttr.widgets.load()}catch(e){}})},linkedin:function(t){e(".viral-button-linkedin",t).length&&require(["//platform.linkedin.com/in.js"],function(){"undefined"!=typeof IN&&IN.parse&&IN.parse()})},facebook:function(t){e(".fb-like",t).length&&require(["//connect.facebook.net/en_US/all.js#xfbml=1"],function(){"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()})},pinterest:function t(n){e(".viral-button-pinterest",n).on("click",function(){require(["//assets.pinterest.com/js/pinmarklet.js"],function(){if(void 0!==t)return t.PIN?void t.PIN.f.init():void(t.PIN=Object.keys(window).filter(function(e){return/^PIN_/.test(e)})[0])})})},stumbledupon:function(t){e(".viral-button-stumble",t).length&&"https:"===window.location.protocol&&require(["//platform.stumbleupon.com/1/widgets.js"],function(){"undefined"!=typeof STMBLPN&&STMBLPN.processWidgets()})}}}),define("be/Controller/Dialog",["nbd/Controller/Entity","nbd/util/media"],function(e,t){"use strict";var n=e.extend({init:function(){this._super.apply(this,arguments),this.mediaView=this.mediaView.bind(this),t.on("all",this.mediaView)},destroy:function(){t.off(null,this.mediaView),this._view&&this._view.destroy(),this._model.destroy()},_initView:function(e,n){var i,o=t.getState();"function"==typeof(i="function"==typeof e?e:o.map(function(t){return e[t]}).filter(function(e){return!!e})[0])&&(this.View=this._view=new i(n),this._view.Controller=this._view._controller=this)},render:function(){return this._view&&this._view.render.apply(this._view,arguments)},mediaView:function(e,t){var n=this.constructor.VIEW_CLASS[e];n&&t&&this.requestView(n)},switchView:function(e){var t=this._view;return this._initView(e,this._model),t&&t.destroy()}});return n}),define("be/Controller/Dialog/Roulette",["jquery","be/Controller/Dialog","nbd/util/async","nbd/Model"],function(e,t,n,i){"use strict";var o=t.extend({$context:null,setContext:function(e){this.$context&&this.$context.off("click"),this.$context=e.on("click",function(e){e.isDefaultPrevented()||e.originalEvent.data===this._view||this.toggle(e.delegateTarget)}.bind(this))},render:function(e){var t=this._view.render(document.body);return this._view.position(e),t},toggle:function(e){this._view.$view&&this._view.$view.length?(this._view.toggle(),this._view.position(e)):(this.render(e||this.$context),n(this._view.show.bind(this._view)))}},{MODEL_CLASS:i});return o}),define("require/hgn!templates/dialog",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="popup '),i.b(i.v(i.f("dialogType",e,t,0))),i.s(i.f("classes",e,t,1),e,t,0,44,50,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.s(i.f("buttons",e,t,1),e,t,1,0,0,"")||i.b(" no-buttons"),i.s(i.f("title",e,t,1),e,t,1,0,0,"")||i.b(" no-title"),i.s(i.f("fullBleed",e,t,1),e,t,0,140,151,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" full-bleed")}),e.pop()),i.b('">'),i.b("\n"+n),i.b('  <div class="popup-inner-wrap">'),i.b("\n"),i.b("\n"+n),i.s(i.f("toolbar",e,t,1),e,t,0,218,622,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <div class="toolbar">'),i.b("\n"+n),i.b("      "),i.s(i.f("title",e,t,1),e,t,0,261,302,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('<h1 class="popup-header">'),n.b(n.t(n.f("title",e,t,0))),n.b("</h1>")}),e.pop()),i.b("\n"+n),i.s(i.f("hideClose",e,t,1),e,t,1,0,0,"")||(i.b('        <a class="header-action close right js-close'),i.s(i.f("layover",e,t,1),e,t,1,0,0,"")||i.b(" popup-close"),i.b('">'),i.b("\n"+n),i.b('          <span class="popup-icon-close beicons beicons-x"></span>'),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n)),i.s(i.f("layover",e,t,1),e,t,0,544,594,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.s(n.f("button",e,t,1),e,t,0,564,576,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(n.rp("<button0",e,t,""))}),e.pop())}),e.pop()),i.b("    </div>"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.b('    <div class="popup-content'),i.s(i.f("toolbar",e,t,1),e,t,0,677,689,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" has-toolbar")}),e.pop()),i.b('">'),i.b("\n"+n),i.b(i.rp("<content1",e,t,"      ")),i.s(i.f("layover",e,t,1),e,t,1,0,0,"")||(i.b("    </div>"),i.b("\n"+n)),i.b("\n"+n),i.b('      <div class="popup-buttons'),i.s(i.f("buttons",e,t,1),e,t,1,0,0,"")||i.b(" hide"),i.b(' cfix">'),i.b("\n"+n),i.s(i.f("buttons",e,t,1),e,t,0,858,870,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<button2",e,t,""))}),e.pop()),i.b("      </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("layover",e,t,1),e,t,0,913,929,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("    </div>"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.b("  </div> \x3c!-- /.popup-inner --\x3e"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("blocking",e,t,1),e,t,0,997,1031,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="blocking-div"></div>'),i.b("\n"+n)}),e.pop()),i.fl()},partials:{"<button0":{name:"button",partials:{},subs:{}},"<content1":{name:"content",partials:{},subs:{}},"<button2":{name:"button",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/button",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('  <div class="form-item form-item-a'),i.s(i.f("containerClasses",e,t,1),e,t,0,56,62,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('">'),i.b("\n"+n),i.b('    <a class="form-button'),i.s(i.f("classes",e,t,1),e,t,0,123,129,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.s(i.f("classes",e,t,1),e,t,1,0,0,"")||i.b(" form-button-default"),i.b('"'),i.b("\n"+n),i.b("      "),i.s(i.f("href",e,t,1),e,t,0,202,218,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' href="'),n.b(n.v(n.f("href",e,t,0))),n.b('"')}),e.pop()),i.b(' unselectable="on"'),i.b("\n"+n),i.b('      tabindex="'),i.b(i.v(i.f("tabindex",e,t,0))),i.s(i.f("tabindex",e,t,1),e,t,1,0,0,"")||i.b("0"),i.b('">'),i.b(i.v(i.f("label",e,t,0))),i.b("</a>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/Dialog",["jquery","nbd/View/Entity","nbd/util/extend","hgn!templates/dialog","hgn!templates/button"],function(e,t,n,i,o){"use strict";var r=t.extend({mustache:{},template:function(t){return e(i(t,n({content:this.mustache.template,button:o.template},this.partials)))},rendered:function(){this.$view.on("click",".js-close, .close, .form-button-close, .form-button-cancel",this.hide.bind(this)).find(".form-button-disabled").on("click",!1)},position:function(){},show:function(){return this.trigger("show",this.$view)},hide:function(){return this.trigger("hide",this.$view)}});return r}),define("be/View/Dialog/Layover",["jquery","be/View/Dialog"],function(e,t){"use strict";var n=t.extend({destroy:function(){this.hide(),this._super()},template:function(t){return this._super(e.extend({dialogType:"layover",layover:!0,toolbar:!0},t))},rendered:function(){this._super(),this.show()},show:function(){if(this.$view)return this.scrollTop=this.scrollTop||e(window).scrollTop(),e("#site-content").hide(),e("html").addClass("overflow-hidden"),this.$view.show(),this._super()},hide:function(){if(this.$view)return e("#site-content").show(),e("html").removeClass("overflow-hidden"),window.scrollTo(0,this.scrollTop),delete this.scrollTop,this.$view.hide(),this._super()}});return n}),define("be/View/Menu",["jquery","be/View/Dialog","nbd/util/async","jquery/ui/position"],function(e,t,n){"use strict";var i=t.extend({init:function(){this._super.apply(this,arguments),this.dismiss=function(e){e.originalEvent.data!==this&&(this.hide(),e.preventDefault())}.bind(this)},destroy:function(){this._unbind(),this._super()},template:function(t){return this._super(e.extend({dialogType:"menu",blocking:!1,hide_toolbar:!0},t))},rendered:function(){this._super();var e=this;this.$view.on("click touchend",function(t){t.originalEvent.data=e})},_bind:function(){e("html").on("click touchend",this.dismiss)},_unbind:function(){e("html").off("click touchend",this.dismiss)},position:function(t,n){if(this.$view){t&&(this._lastContext=t);var i={my:"left top",at:"left bottom+10",of:this._lastContext,collision:"flipfit"};this.$view.position(e.extend(i,n))}},show:function(){if(this.$view)return n(this._bind.bind(this)),this.$view.addClass("shown"),this._super()},hide:function(){if(this.$view)return this._unbind(),this.$view.removeClass("shown"),this._super()},toggle:function(){return this[this.$view.hasClass("shown")?"hide":"show"]()}});return i}),define("lib/keyboard",["jquery","nbd/Class"],function(e,t){"use strict";var n=new(t.extend({listeners:null,globals:null,ignoredElements:{INPUT:!0,TEXTAREA:!0},init:function(t){t=t||{},this.globals=t.global||{},this.listeners=[],this.ignoredElements=e.extend({},this.ignoredElements),this.addListener=this.addListener.bind(this),this.appendListener=this.appendListener.bind(this),this.removeListener=this.removeListener.bind(this),this.addGlobal=this.addGlobal.bind(this),this.keydownHandler=this.keydownHandler.bind(this),e(document.body).on("keydown",this.keydownHandler)},destroy:function(){e(document.body).off("keydown",this.keydownHandler)},translate:function(t,n){var i,o,r,s=/^((?:(?:meta|shift|ctrl|alt)-)*)(.+)$/i;n=n||{};for(i in t)if(t.hasOwnProperty(i)){if(!(r=s.exec(i)))continue;o=this.constructor.keyCodes[r[2].toLowerCase()],o&&(n[o]=n[o]||e.Callbacks("unique stopOnFalse"),n[o].add(r[1]?function(e,t){return function(n){if(e.map(function(e){return e?e.toLowerCase()+"Key":null}).reduce(function(e,t){return e&&(!t||n.originalEvent[t])},!0))return t.call(this,n)}}(r[1].split("-"),t[i]):t[i]))}return n},addListener:function(e){this.listeners.push(this.translate(e))},appendListener:function(e){this.listeners.length||this.listeners.push({}),this.translate(e,this.listeners[this.listeners.length-1])},removeListener:function(){this.listeners.pop()},addGlobal:function(e){this.translate(e,this.globals)},keydownHandler:function(e){var t=this.listeners.length?this.listeners[this.listeners.length-1]:{};(t.hasOwnProperty(e.which)||this.globals.hasOwnProperty(e.which))&&(!t[e.which]||!this.constructor.bypassCodes[e.which]&&this.ignoredElements[e.target.tagName]||t[e.which].fire(e),this.globals[e.which]&&this.globals[e.which].fire(e))},keyupHandler:function(e){}},{keyCodes:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},bypassCodes:{16:!0,17:!0,18:!0,19:!0,20:!0,27:!0,45:!0,112:!0,113:!0,114:!0,115:!0,116:!0,117:!0,118:!0,119:!0,120:!0,121:!0,122:!0,123:!0}}));return{on:n.addListener,off:n.removeListener,add:n.appendListener,global:n.addGlobal}}),define("be/View/Popup",["nbd/util/extend","be/View/Dialog","lib/keyboard"],function(e,t,n){"use strict";var i=t.extend({template:function(t){return this._super(e({dialogType:"desktop",blocking:!0,toolbar:!0},t))},render:function(){return i.Z_INDEX+=2,this._zIndex=i.Z_INDEX,this._super.apply(this,arguments)},rendered:function(){this._super(),this.$view.filter(".blocking-div").on("click",this.hide.bind(this))},position:function(){if(this.$view){var e=this.$view.filter(".popup"),t=window.innerHeight||document.documentElement.offsetHeight,n=(t-e.outerHeight())/2;e.css({"z-index":this._zIndex,"margin-left":-~~(e.width()/2)+"px",top:n>0?n:void 0}).addClass("shown"),this.$view.filter(".blocking-div").css({"z-index":this._zIndex-1})}},show:function(){if(this.$view)return n.on({escape:this.hide.bind(this)}),this.$view.parent().is(document.body)||this.$view.appendTo(document.body),this._super()},hide:function(){if(this.$view)return n.off(),this.$view.detach(),this._super()},toggle:function(){return this[this.$view.parent().is(document.body)?"hide":"show"]()}},{Z_INDEX:250});return i}),define("require/hgn!templates/message",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<form class="send-message">'),i.b("\n"+n),i.b('  <div class="message-subject form-item form-item-text">'),i.b("\n"+n),i.b('    <input name="subject" class="form-text form-text-normal" type="text" placeholder="Subject" data-validate="required,Generic">'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("body",e,t,1),e,t,0,235,249,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<textarea0",e,t,""))}),e.pop()),i.b("</form>"),i.b("\n"),i.fl()},partials:{"<textarea0":{name:"textarea",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/form/textarea",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="form-item form-item-textarea'),i.s(i.f("containerClasses",e,t,1),e,t,0,61,67,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('">'),i.b("\n"+n),i.b("  "),i.s(i.f("label",e,t,1),e,t,0,103,142,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('<label for="'),n.b(n.v(n.f("id",e,t,0))),n.b('">'),n.b(n.t(n.f("label",e,t,0))),n.b("</label>")}),e.pop()),i.b("\n"+n),i.b('  <textarea id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" name="'),i.b(i.v(i.f("id",e,t,0))),i.b('" class="form-textarea'),i.s(i.f("classes",e,t,1),e,t,0,223,229,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('"'),i.b("\n"+n),i.b("    "),i.s(i.f("maxlength",e,t,1),e,t,0,261,287,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' maxlength="'),n.b(n.v(n.f("maxlength",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("placeholder",e,t,1),e,t,0,322,352,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' placeholder="'),n.b(n.v(n.f("placeholder",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("autocomplete",e,t,1),e,t,0,390,422,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' autocomplete="'),n.b(n.v(n.f("autocomplete",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b('    data-validate="'),i.b(i.v(i.f("validate",e,t,0))),i.b('">'),i.b(i.v(i.f("value",e,t,0))),i.b("</textarea>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/trait/message",["hgn!templates/message","hgn!templates/form/textarea"],function(e,t){"use strict";return{mustache:e,partials:{textarea:t.template},templateData:function(){return{classes:["message"],title:"Message",buttons:[{label:"Send",classes:["form-button-default","form-submit"]},{label:"Cancel",classes:["form-button-cancel"]}],contactName:this._model.get("name"),body:{id:"message",placeholder:"Message",container_classes:["message-body"],validate:"required,Generic",classes:["form-text-normal"]}}},rendered:function(){var e=this;this.onSubmit(function(t){return this.then(function(){e.hide()}),e.Controller.create(t.subject,t.message)}),this.onCancel(),this._super()}}}),define("be/trait/form/list",["jquery"],function(e){"use strict";function t(t,n){var i=e("<select>",{name:t[0].id,multiple:n||!1}).hide();return n||e("<option>",{selected:!0,disabled:!0}).appendTo(i),t.children("li").each(function(){e("<option>",{value:e(this).data("value")}).appendTo(i)}),i.insertAfter(t),i}function n(n,i){n.each(function(){var o=t(e(this).on("click",">li",function(){var t=e(this),r=t.data("value"),s=o.find('[value="'+r+'"]'),a=!s.prop("selected");s.prop("selected",a),a=s.prop("selected"),(i?n.find('[data-value="'+r+'"]'):t.siblings().removeClass("active").end()).toggleClass("active",a)}),i)})}return{selectList:function(e){n(e||this.$view.find("ul,ol"),!1)},multiList:function(e){n(e||this.$view.find("ul,ol"),!0)}}}),define("be/trait/form/toggle",["jquery"],function(e){"use strict";function t(t){var n=e("<input>",{type:"checkbox",name:t[0].id,value:"1",checked:t.hasClass("active")}).hide();return n.insertAfter(t),n}return{toggleElement:function(n){n.each(function(n){var i=t(n=e(this).on("click",function(){var e=!i.prop("checked");i.prop("checked",e).change(),n.toggleClass("active",e)}))})}}}),define("lib/validate",[],function(){"use strict";function e(e){var t,n,i=!1,o=0,r=[];for(t=0;t<e.length;++t)"["!==e[t]?"]"!==e[t]?","!==e[t]||i||(n=e.substring(o,t),n&&r.push(n),o=t+1):i=!1:i=!0;return n=e.substring(o),n&&r.push(n),r}function t(i,o){var r;return delete t.message,o=o?e(o):[],i=null===i||void 0===i?"":i,r=o.indexOf("optional"),r>-1?(o.splice(r,r+1),!i||o.every(n,i)):o.every(n,i)}var n,i=RegExp.prototype.test,o={Generic:{test:i.bind(/^[^<>]+$/),message:"This field may not contain less than signs (&lt) or greater than signs (&gt;)"},AlphaNumeric:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),message:"This field must contain only alphanumeric characters"},Alpha:{test:i.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),message:"This field must contain only alpha characters"},AlphaDash:{test:i.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),message:"This field must contain only alpha characters or dashes"},ANDash:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),message:"This field must contain only alphanumeric characters or dashes"},ANUnder:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_]+$/),message:"This field must contain only alphanumeric characters with or without underscores"},ANUSpace:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_ ]+$/),message:"This field must contain only alphanumeric characters with or without underscores and spaces"},ANEmail:{test:i.bind(/^([_\dA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+|[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/),message:"This field must contain a valid username or email"},Integer:{test:i.bind(/^\-?\d+$/),message:"This field must only contain numbers, without any spaces"},CreditCardNumber:{test:i.bind(/^\d{13,16}$/),message:"This field must only contain numbers, without any spaces or dashes"},Decimal:{test:i.bind(/^\-?\d+(\.\d+)?$/),message:"This field must be a valid decimal number"},Date:{test:i.bind(/^\d{1,2}\-\d{1,2}-\d{4}( \d{2}:\d{2}:\d{2})?$/),message:"This field must be a valid date"},SqlDate:{test:i.bind(/^\d{4}\-\d{2}\-\d{2}$/),message:"This field must be a valid date"},SqlDateTime:{test:i.bind(/^\d{4}\-\d{2}\-\d{2}\s\d{2}\:\d{2}\:\d{2}$/),message:"This field must be a valid datetime"},SlashDate:{test:i.bind(/^\d{1,2}\/\d{1,2}\/\d{4}$/),message:"This field must be a valid date"},Email:{test:i.bind(/^[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/),message:"This field must be a valid email address"},Name:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),message:"This field must be a valid name"},Username:{test:i.bind(/^[A-Za-z0-9_\-]+$/),message:"This field contains invalid characters. Please use only letters, numbers, dash or underscore characters."},Password:{test:i.bind(/^\S{6,32}$/),message:"This field must be between 6 and 32 characters"},Address:{test:i.bind(/^[\w0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F# \' \.\,\&\-]+$/),message:"This field must be a valid address"},City:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F \' \. \-]+$/),message:"This field must be a valid city"},Province:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F ]+$/),message:"This field must be a valid province"},IntZip:{test:i.bind(/^[A-Za-z0-9#\. \-]+$/),message:"This field must be a valid zipcode"},UsZip:{test:i.bind(/^\d{5}(\-\d{4})?$/),message:"This field must be a valid US zipcode"},Country:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),message:"This field must be a valid country"},IntPhone:{test:i.bind(/^[0-9\+ \(\)\#\-]+$/),message:"This field must be a valid phone"},UsPhone:{test:i.bind(/^\d{3}\-\d{3}\-\d{4}$/),message:"This field must be a valid US phone"},PicExt:{test:i.bind(/^((jpg)|(jpeg)|(png)|(gif)){1}$/),message:"This field must be a valid image extension"},VideoExt:{test:i.bind(/^((mpg)|(mpeg)|(mov)|(avi)|(dv)|(qt)|(asf)|(flv)){1}$/),message:"This field must be a valid video extension"},Url:{test:i.bind(/^(http(?:s)?:\/\/|www.)[^<>]*$/),message:"This field must be a URL starting with http:// or www."},UrlExt:{test:i.bind(/^((?:https?):\/\/)?(?:(?:(?:[\w\.\-\+!$&\'\(\)*\+,;=_]|%[0-9a-f]{2})+:)*(?:[\w\.\-\+%!$&\'\(\)*\+,;=]|%[0-9a-f]{2})+@)?(?:[A-Za-z0-9_\-]+\.)(?:[A-Za-z0-9\-\._])+(?::\d+)?(?:[\/|\?](?:[\w#!:\.\?\+=&@$\'~*,;_\/\(\)\[\]\-]|%[0-9a-f]{2})*)?$/),message:"This field must be a valid URL"},Html:{test:function(){return!i.apply(/<((?!\/?span|\/?h1|\/?h2|\/?h3|\/?h4|\/?h5|\/?h6|\/?a|\/?b|\/?ol|\/?ul|\/?li|\/?i|\/?em(?!bed)|\/?p|\/?div|\/?br|\/?unb|\/?uni|\/?\s|\/?\>)[^\>]*\>)/i,arguments)},message:"This field must be properly formed HTML"},Twitter:{test:i.bind(/^[A-Za-z0-9_\-]{1,15}$/),message:"This field must be a valid twitter username (without the @ character)"},required:{test:i.bind(/.+/),message:"This field is required"},length:{test:function(e,t){var n=/\[(,?\d+(?:,\d+)?)\]/.exec(t);return e=String(e).replace(/[\s]+/g," "),!!n&&new RegExp("^.{"+n[1]+"}$").test(e)},message:function(e,t){var n;return(n=/\[(\d+),(\d+)\]/.exec(t))?"Must be between "+n[1]+" and "+n[2]+" characters.":(n=/\[,(\d+)\]/.exec(t))?"Must be at most "+n[1]+" characters.":(n=/\[(\d+),\]/.exec(t))?"Must be at least "+n[1]+" characters.":(n=/\[(\d+)\]/.exec(t),n?"Must be exactly "+n[1]+" characters.":void 0)}}},r=/(\w+)(.*)/;return n=function(e){var n,i=r.exec(e);return i&&(e=i[1],n=i[2]),!o[e]||!o[e].test||(i=o[e].test(this,n),i||(t.message="function"==typeof o[e].message?o[e].message(this,n):o[e].message),i)},t}),define("lib/tooltip",["jquery"],function(e){"use strict";function t(t,n,i,o){var r,s;return i=i||[],o=o||!1,r=t.closest(".js-form-item, .form-item"),r.length||(r=t),s=e("<div>"+n+"</div>").addClass(i.join(" ")),o?r.after(s):s.appendTo(r),s.css("top",-(s.outerHeight()+8-t.position().top)),r.addClass("form-item-error"),s}return t}),define("lib/showMessages",["jquery"],function(e){"use strict";function t(t,n,i){i=e.extend({fade:!0,floating:!1,prepend:!1},i);var o=t.find(".messages"),r=[];o.length||(o=e('<div class="messages"></div>').hide().addClass(i.classes||""),i.floating&&o.addClass("messages-floating"),i.prepend?o.prependTo(t):o.appendTo(t)),n.forEach(function(e){e.type=e.type||"message";var t;switch(e.type){case"error":case"message":case"success":break;default:throw'"'+e.type+'" is not a valid message type'}t='<div class="'+e.type+'"><span class="icon-status-'+e.type+' icon sprite-site-elements"></span>'+e.message+"</div>",r.push(t)}),o.html(r.join("")).show(),i.fade&&o.delay(5e3).fadeOut(1e3)}return t}),define("be/trait/form/submit",["jquery","nbd/trait/promise","nbd/util/media","lib/validate","lib/tooltip","lib/showMessages"],function(e,t,n,i,o,r){"use strict";function s(e,t){var n=e[t.name];return e[t.name]=n?[].concat(n,t.value):t.value,e}var a=function(e){var t={};if(Object.keys(e).forEach(function(n){var o=this.find('[name="'+n+'"]').data("validate");i(e[n],o)||(t[n]=i.message)},this),Object.keys(t).length)throw t;return e};return{continuousValidation:function(){this.$view.find("input, textarea").each(function(){var t=e(this),n=t.data("validate");t.on("blur",function(){t.parent().find(".form-error").remove(),i(t.val(),n)||o(t,i.message)})})},onSubmit:function(i,c,l){c=c||this.$view;var u=c.is("form")?c:c.find("form");c.on("click keydown",".form-submit:not([type=submit])",function(e){switch(e.which){case 1:case 13:case 32:u.submit()}}),u.on("submit",function(c){var d=new t,f=u.serializeArray().reduce(s,{}),h={url:u.attr("action"),type:u.attr("method")||"POST"};return c.originalEvent=c.originalEvent||{},u.find(".form-error").remove(),u.find(".form-item-error").removeClass("form-item-error"),c.originalEvent.promise=(c.isDefaultPrevented()&&!u.attr("onsubmit")?d:d.then(a.bind(u))).then(function(n){if(h.data=n,"function"!=typeof i)return e.ajax(h);var o=new t,r=o.thenable(),s=i.call(r,n);return o.resolve(s===r?e.ajax(h):s),o}).then(function(){l||u.find(":input").val("").removeAttr("checked selected")},function(e){var t,i;if(e instanceof Error)return void console.error(e);throw e.responseJSON&&(e=e.responseJSON),e.messages&&r(u,e.messages),console.warn(e),t=e.errors||e,i=n.is("desktop")?["form-error"]:["form-error","form-error-right"],Object.keys(t).forEach(function(e){o(u.find("[name="+e+"]"),t[e],i)}),e}),d.resolve(f),!1})},onCancel:function(e){this.$view.on("click",".form-button-cancel",function(){this.$view.find(".form-text, .form-textarea").val(""),"function"==typeof e&&e()}.bind(this))}}}),define("be/trait/form",["nbd/util/extend","be/trait/form/list","be/trait/form/toggle","be/trait/form/submit"],function(e,t,n,i){"use strict";return e({},i,t,n)}),define("be/Controller/Dialog/Message",["jquery","nbd/event","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Menu","be/View/Popup","be/trait/message","be/trait/form"],function(e,t,n,i,o,r,s,a){"use strict";var c=n.extend({create:function(t,n){return e.ajax({url:"/inbox/compose",type:"POST",data:{from_profile:1,to_types:1,to_ids:this._model.get("id"),subject:t,inbox_message:n}})},render:function(t){e(document.body).hasClass("logged-in")&&(this.$source=e(t),this.Model.set({id:this.$source.data("contact_id")||this.$source.attr("contact_id"),name:this.$source.data("contact_name")}),this._super(t))}},{VIEW_CLASS:{phone:i.extend(s).mixin(a),tablet:o.extend(s).mixin(a),desktop:r.extend(s).extend({templateData:function(){var e=this._super();return e.title="Send Message to "+e.contactName,e}}).mixin(a)}});return c}),function(e){"use strict";var t={};t.VERSION="0.9.2";var n,i={},o=function(e,t){return function(){return t.apply(e,arguments)}},r=function(){var e,t,n=arguments,i=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in i||!n[t].hasOwnProperty(e)||(i[e]=n[t][e]);return i},s=function(e,t){return{value:e,name:t}};t.DEBUG=s(1,"DEBUG"),t.INFO=s(2,"INFO"),t.WARN=s(4,"WARN"),t.ERROR=s(8,"ERROR"),t.OFF=s(99,"OFF");var a=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.debug};a.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,r({level:e},this.context))}};var c=new a({filterLevel:t.OFF});!function(){var e=t;e.enabledFor=o(c,c.enabledFor),e.debug=o(c,c.debug),e.info=o(c,c.info),e.warn=o(c,c.warn),e.error=o(c,c.error),e.log=e.debug}(),t.setHandler=function(e){n=e
},t.setLevel=function(e){c.setLevel(e);for(var t in i)i.hasOwnProperty(t)&&i[t].setLevel(e)},t.get=function(e){return i[e]||(i[e]=new a(r({name:e},c.context)))},t.useDefaults=function(n){if("console"in e){var i=e.console;t.setLevel(n||t.DEBUG),t.setHandler(function(e,n){var o=i.log;n.name&&Array.prototype.splice.call(e,0,0,"["+n.name+"]"),n.level===t.WARN&&i.warn?o=i.warn:n.level===t.ERROR&&i.error?o=i.error:n.level===t.INFO&&i.info&&(o=i.info),o.apply(i,e)})}},"function"==typeof define&&define.amd?define("log",t):"undefined"!=typeof module&&module.exports?module.exports=t:e.Logger=t}(window),define("require/hgn!templates/project/collection",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b("<form>"),i.b("\n"+n),i.b('  <div class="form-item form-item-text form-item-siamese left">'),i.b("\n"+n),i.b('    <input type="text" placeholder="Create a New Collection"'),i.b("\n"+n),i.b('    name="collection" class="form-text">'),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b('  <div class="form-item form-item-a form-item-siamese left">'),i.b("\n"+n),i.b('    <a class="form-button form-submit form-button-light-and-grey">Add</a>'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <ul id="collection_ids" class="divided-list'),i.s(i.f("collections",e,t,1),e,t,1,0,0,"")||i.b(" empty"),i.b('">'),i.b("\n"+n),i.s(i.f("collections",e,t,1),e,t,0,433,511,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <li class="divided-item collection" data-key="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</li>"),i.b("\n"+n)}),e.pop()),i.b("  </ul>"),i.b("\n"+n),i.b("</form>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/collection",["jquery","hgn!templates/project/collection"],function(e,t){"use strict";return{mustache:t,title:"Collections",templateData:function(){return e.extend({classes:["collections"],title:this.title,button:{label:"Save",containerClasses:["left"],classes:["form-button-default","collections-save","form-button-small"]},buttons:[{label:"Save",classes:["form-button-default","collections-save"]}]},this._model.data())},rendered:function(){this._super(),this.bindSelections(),this.newCollection(),this.saveCollections()},saveCollections:function(){this.$view.on("click",".collections-save",function(){this.Controller.update(),this.hide()}.bind(this))},newCollection:function(){var e=this.$view.find("form");e.on("submit",function(t){var n=e.serializeArray(),i=n[0].value;return this.Controller.create(i).then(function(){this.render(),this.position(),this.show()}.bind(this)),!1}.bind(this)).on("click",".form-submit",function(){e.submit()})},bindSelections:function(){var t=this;this.select(this._model.get("project_collection_ids")),this.listenTo(this._model,"project_collection_ids",this.select),this.$view.on("click",".collection",function(){var n,i=e(this).data("key"),o=t._model.get("project_collection_ids");~(n=o.indexOf(i))?o.splice(n,1):o.push(i),t._model.trigger("project_collection_ids",o)})},select:function(e){return this.$view.find(".collection").removeClass("active"),e&&e.forEach(function(e){this.$view.find(".collection[data-key="+e+"]").addClass("active")},this)}}}),define("project/Controller/Collection",["log","moment","lib/xhr","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Menu","be/View/Popup","project/trait/collection"],function(e,t,n,i,o,r,s,a){"use strict";e=e.get("Project Collection"),e.error=e.error.bind(e);var c=i.extend({create:function(i){return n({url:"/collection/create",type:"POST",data:{collection_name:i}}).then(function(e){var n=e.id,o=+t().format("X");if(!n)throw e;return{id:n,title:i,owners:[],url:"/collection/"+encodeURIComponent(i)+"/"+n,created_on:o,modified_on:o}}).then(function(e){return this.Model.get("collections").unshift(e),this.Model.get("project_collection_ids").unshift(e.id),this.update(),e}.bind(this),e.error)},read:function(){var t=n({url:"/gallery/collections/"+this.Model.id()}).then(function(e){if(!e.project_collection_ids)throw e;return e.collections.sort(function(t,n){return e.project_collection_ids.indexOf(+n.id)-e.project_collection_ids.indexOf(+t.id)}),e});return t.then(this.Model.set.bind(this.Model),e.error),t},update:function(){return n({url:"/collection/project/"+this.Model.id(),type:"POST",data:{collection_ids:this.Model.get("project_collection_ids").join("|")}}).then(null,e.error)},render:function(){var e=this,t=this._super,n=arguments;this.read().then(function(){t.apply(e,n)}).then(this.View.show.bind(this.View))}},{VIEW_CLASS:{phone:o.extend(a),tablet:r.extend(a),desktop:s.extend(a).mixin({title:"Add to Collections"})}});return c}),define("lib/recaptcha",["nbd/trait/promise"],function(e){"use strict";return function(t,n,i,o){var r=new e;return"object"!=typeof i&&(o=i,i={}),o=o||"//www.google.com/recaptcha/api/js/recaptcha_ajax.js",require([o],function(){Recaptcha.create(t,n,i),r.resolve(Recaptcha)},r.reject),r.thenable()}}),define("require/hgn!templates/project/report",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div>"),i.b("\n"+n),i.b("  <form>"),i.b("\n"+n),i.b('    <ul id="reason" class="divided-list menu-selection">'),i.b("\n"+n),i.s(i.f("options",e,t,1),e,t,0,90,201,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <li class="divided-item reason beicons beicons-check-primary" data-value="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("reason",e,t,0))),i.b("</li>"),i.b("\n"+n)}),e.pop()),i.b("    </ul>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-selection">'),i.b("\n"+n),i.s(i.f("comments",e,t,1),e,t,0,277,291,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<textarea0",e,t,""))}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-selection">'),i.b("\n"+n),i.s(i.f("email",e,t,1),e,t,0,366,376,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<text1",e,t,""))}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("captcha",e,t,1),e,t,0,415,814,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <div id="becaptcha" class="menu-section">'),i.b("\n"+n),i.b('        <div id="recaptcha_image"></div>'),i.b("\n"+n),i.b('        <div class="form-item form-item-text">'),i.b("\n"+n),i.b('          <input id="recaptcha_response_field" name="recaptcha_response_field" class="form-text form-text-normal" type="text" placeholder="Enter the code shown above">'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="js-recaptcha-generate">Generate new</div>'),i.b("\n"+n),i.b("      </div>"),i.b("\n"+n)}),e.pop()),i.b("  </form>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<textarea0":{name:"textarea",partials:{},subs:{}},"<text1":{name:"text",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/form/text",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="form-item form-item-text be-placeholder'),i.s(i.f("containerClasses",e,t,1),e,t,0,72,78,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('-container">'),i.b("\n"+n),i.b("  "),i.s(i.f("label",e,t,1),e,t,0,136,194,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('<label class="form-label" for="'),n.b(n.v(n.f("id",e,t,0))),n.b('">'),n.b(n.t(n.f("label",e,t,0))),n.b("</label>")}),e.pop()),i.b("\n"+n),i.b('  <input name="'),i.b(i.v(i.f("id",e,t,0))),i.b('" type="text" class="form-text'),i.s(i.f("classes",e,t,1),e,t,0,268,274,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b(" validate["),i.b(i.v(i.f("validate",e,t,0))),i.b(']" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.b("\n"+n),i.b("  "),i.s(i.f("placeholder",e,t,1),e,t,0,341,371,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' placeholder="'),n.b(n.v(n.f("placeholder",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("  "),i.s(i.f("autocomplete",e,t,1),e,t,0,407,439,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' autocomplete="'),n.b(n.v(n.f("autocomplete",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("  "),i.s(i.f("value",e,t,1),e,t,0,469,487,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' value="'),n.b(n.v(n.f("value",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b('  data-validate="'),i.b(i.v(i.f("validate",e,t,0))),i.b('">'),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/report",["nbd/util/extend","lib/recaptcha","hgn!templates/project/report","hgn!templates/form/text","hgn!templates/form/textarea"],function(e,t,n,i,o){"use strict";return{mustache:n,partials:{text:i.template,textarea:o.template},templateData:function(){return e({title:"Report",classes:["report"],buttons:[{label:"Send",classes:["form-button-default","form-submit"]},{label:"Cancel",classes:["form-button-cancel"]}],comments:{id:"message",placeholder:"Comments",classes:["form-text-normal"]}},this._model.data(),this.Model.get("logged_out")?{email:{id:"email",placeholder:"Email Address",classes:["form-text-normal"]}}:{})},captcha:function(){var e=this._model.get("captcha"),n=this.$view.find("#becaptcha");e&&t(e.api_key,n[0],{theme:"custom",custom_theme_widget:"becaptcha"},e.script_url).then(function(e){n.on("click",".js-recaptcha-generate",function(){e.reload()})})},rendered:function(){this.selectList(),this.captcha(),this.onSubmit(function(e){this.Controller.create(e).then(this.hide.bind(this))}.bind(this)),this.onCancel(),this._super()},hide:function(){this._super.apply(this,arguments),this.$view=null}}}),define("project/Controller/Report",["lib/xhr","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Menu","be/View/Popup","be/trait/form","project/trait/report"],function(e,t,n,i,o,r,s){"use strict";var a=t.extend({init:function(){this._super.apply(this,arguments),this.path=this.Model.get("CONSTANTS").REPORT_URL+this.Model.id()},create:function(t){return e({url:this.path,type:"POST",data:t})},read:function(){var t=e(this.path);return t.then(this.Model.set.bind(this.Model)),t},render:function(){var e=this,t=this._super,n=arguments;this.read().then(function(){t.apply(e,n)}).then(this.View.show.bind(this.View))}},{VIEW_CLASS:{phone:n.extend(s).mixin(r),tablet:i.extend(s).mixin(r),desktop:o.extend(s).mixin(r)}});return a}),define("lib/scrollpoint",["jquery"],function(e){"use strict";function t(e){return l.test(e)||e>0&&e<1}function n(t){if(e.isNumeric(t))return parseFloat(t);var n=l.exec(t);return n?n[1]/100:parseInt(t,10)}function i(e){return e.is(u)?d.height()-(window.innerHeight||u.height()):e.prop("scrollHeight")}function o(e,n,o){return n>(t(e)?e*i(o):parseInt(e,10))}function r(t){var n="window"===t?u:e(t);return function(){var e,i,r,s=n.scrollTop();for(e in f[t])i=f[t][e],r=o(e,s,n),i.cache=i.cache||!1,i.cache!==r&&(i.fire(r),i.cache=r)}}function s(t,i,o){t=n(t);var r=f[o][t];r||(r=f[o][t]=new e.Callbacks),r.add(i)}function a(e,t,n){n=n||"window";var i;if(t){if(e)return void f[n][e].remove(t);for(i in f[n])f[n][i].remove(t)}else"string"==typeof e&&(f[n][e].empty(),delete f[n][e]),n&&delete f[n]}function c(t,n,i){i=i||"window";var o,a="window"===i?u:e(i);f.hasOwnProperty(i)||(f[i]={},a.on("scroll",r(i)));{if("object"!=typeof t)return s(t,n,i);for(o in t)s(o,t[o],i)}}var l=/(\d+)%/,u=e(window),d=e(document),f={};return c.on=c,c.off=a,c}),define("require/hgn!templates/project/viralIcons",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="viral-icons">'),i.b("\n"+n),i.b('  <a href="https://twitter.com/share" class="viral-button twitter-share-button viral-button-twitter" data-url="'),i.b(i.v(i.f("url",e,t,0))),i.b('" data-text="'),i.b(i.v(i.f("title",e,t,0))),i.b('" data-via="Behance" data-count="none">Tweet</a>'),i.b("\n"),i.b("\n"+n),i.b('  <span class="viral-button viral-button-linkedin"><script type="IN/Share" data-url="'),i.b(i.v(i.f("url",e,t,0))),i.b('"><\/script></span>'),i.b("\n"),i.b("\n"+n),i.b('  <div class="viral-button viral-button-pinterest"></div>'),i.b("\n"),i.b("\n"+n),i.b('  <span class="viral-button viral-button-stumble"><su:badge layout="4" location="'),i.b(i.v(i.f("url",e,t,0))),i.b('"></su:badge></span>'),i.b("\n"),i.b("\n"+n),i.b('  <div class="fb-like" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false"></div>'),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),function(e){var t={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:""},n=(e(document),[]),i=function(t){for(var i=t.scrollTop(),o=e(window).height(),r=t.is(e(window))?e(document).height():t.height(),s=r-o,a=i>s?s-i:0,c=0;c<n.length;c++){var l=n[c];if(i<=(t.is(e(window))?l.stickyWrapper.offset().top:l.stickyWrapper.offset().top-t.offset().top)-l.topSpacing-a)null!==l.currentTop&&(l.stickyElement.css("position","").css("top",""),l.stickyElement.removeClass(l.className),l.currentTop=null);else{var u=r-l.stickyElement.outerHeight()-l.topSpacing-l.bottomSpacing-i-a;u<0?u+=l.topSpacing:u=l.topSpacing,l.currentTop!=u&&(l.stickyElement.css("position","fixed").css("top",u),void 0!==l.getWidthFrom&&l.stickyElement.css("width",e(l.getWidthFrom).width()),l.stickyElement.addClass(l.className),l.currentTop=u)}}},o={init:function(o,r){r=r||e(window);var s=e.extend({},t,o);return r.each(function(){this.addEventListener?this.addEventListener("scroll",function(){i(r)},!1):this.attachEvent&&this.attachEvent("onscroll",function(){i(r)})}),this.each(function(){var t=e(this),i=t.attr("id"),o=e("<div></div>").attr("id",i+"-sticky-wrapper").addClass(s.wrapperClassName);t.wrapAll(o),s.center&&t.parent().css({width:t.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"==t.css("float")&&t.css({float:"none"}).parent().css({float:"right"});var r=t.parent();r.css("height",t.outerHeight());var a={topSpacing:s.topSpacing,bottomSpacing:s.bottomSpacing,stickyElement:t,currentTop:null,stickyWrapper:r,className:s.className,getWidthFrom:s.getWidthFrom};t.data("sticky",a),n.push(a)})},update:function(t){t=t||e(window),i(t)}};e.fn.sticky=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.sticky"):o.init.apply(this,arguments)},e(function(){setTimeout(function(){i(e(window))},0)})}(jQuery),define("jquery/plugins/jquery.sticky",function(){}),define("project/lib/stickyBar",["jquery","lib/scrollpoint","lib/social","be/follow","be/Controller/Dialog/Message","project/Controller/Collection","hgn!templates/project/viralIcons","jquery/plugins/jquery.sticky"],function(e,t,n,i,o,r,s){"use strict";return{init:function(a,c,l){var u=c.is(e(document.body))?a.height()+a.offset().top:a.height(),d=e('<div id="sticky-sidebar"></div>)').append(e(".sidebar-owner",a).clone()).append(e(".sidebar-actions",a).clone());i.init(d),this.message=new o,this.message.setContext(d.find(".send-message")),this.collection=new r(l.project.id),this.collection.setContext(d.find(".add-to-collection")),d.find(".viral-icons").html(s({url:document.location.href,title:document.title,no_pinterest:"no-use"===l.project.copyright.license})),t(u,function(t){t&&a.find("#sticky-sidebar").length<1&&(a.append(d),n.init(d),d.sticky({topSpacing:e("#navmenui-shuffle").outerHeight()+e(".showcase-bar").outerHeight(),bottomSpacing:e("#site-footer").height()+parseInt(e("#content-container").css("margin-bottom"),10)},e(c.is(e(document.body))?window:"#project-popup")))},c.is(e(document.body))?"window":"#project-popup")},destroy:function(e){t.off(null,null,e)}}}),define("project/View/Curation",["nbd/View"],function(e){"use strict";var t=e.extend({init:function(e,t){this.$view=e,this._model=t,this.rendered()},destroy:function(){this._model.off(null,null,this)},rendered:function(){var e=this;this._model.on("queued",function(e){this.$view.toggleClass("queued",e),e&&this.$view.addClass("queued-hold").one("mouseleave",function(){$(this).removeClass("queued-hold")})},this),this.$view.on("click",function(){e._controller.queue()})}});return t}),define("project/Controller/Curation",["nbd/Controller","nbd/Model","project/View/Curation","lib/xhr"],function(e,t,n,i){"use strict";var o=e.extend({init:function(e,n){this.views=[],this._model=new t(e,{blocking:!1,queued:n||!1})},_initView:function(e){var t=new n(e,this._model);return t._controller=this,t},add:function(e){if(e.data("becurate"))return this;var t=this._initView(e);return e.data("becurate",t),this.views.push(t),this},queue:function(){function e(){t.set("blocking",!1)}if(!this._model.get("blocking")){var t=this._model,n=this._model.get("queued"),o=this.constructor.url(this._model.id()),r=n?"DELETE":"POST";return this._model.set("blocking",!0),i({url:o,type:r}).then(function(e){e&&t.set("queued",e.queued)}).then(e,e)}},destroy:function(){this.views.forEach(function(e){e.destroy()}),this.views=[],this._model.destroy(),this._model=null}},{url:function(e){return"/a/curation/curate/"+e}});return o}),define("project/lib/curation",["jquery","nbd/util/extend","nbd/trait/pubsub","project/Controller/Curation"],function(e,t,n,i){"use strict";var o=function(e,t){var n=new i(e,t);return this.listenTo(n._model,"queued",function(t){this.trigger("queued",e,t)}),n},r=function(e,t){var n=e.data(t);n&&o.call(s,n,e.hasClass("queued")).add(e)},s={init:function(t){var n=this;e(".js-action-curate",t).each(function(){n.curate(e(this))})},curate:function(e){r(e,"project")}};return t(s,n),s}),define("lib/picturefill",["jquery"],function(e){"use strict";var t=window.matchMedia||window.msMatchMedia,n=function(){var n=e(this),i=n.find("div[data-src]");if(!i.length)return void n.find("img").remove();t&&(i=i.first().add(i.filter(function(){var n=e(this).data("media");return n&&t(n).matches})).last()),n.attr("data-rendered","rendered"),e("<img>",{alt:n.data("alt"),src:i.data("src"),class:i.data("class"),title:i.data("title"),"data-pin-nopin":"pin"}).appendTo(n)};return e.fn.picturefill=function(){return this.find("div[data-picture]:not([data-rendered])").each(n),this}}),define("project/sidebar",["jquery","nbd/util/async","nbd/util/media","nbd/event","be/follow","be/Controller/Dialog/Message","project/Controller/Collection","project/Controller/Report","project/lib/stickyBar","project/lib/curation","lib/picturefill","lib/social","hgn!templates/project/viralIcons"],function(e,t,n,i,o,r,s,a,c,l,u,d,f){"use strict";return{init:function(u,h,p){var b=u.find(".variable-text-full"),m=u.find(".variable-text-short"),v=u.find("#sidebar-share"),g=u.find(".js-sidebar-curation");m.on("click",".variable-text-link",function(){m.addClass("hide"),b.removeClass("hide")}),b.on("click",".variable-text-link",function(){b.addClass("hide"),m.removeClass("hide")}),u.is(e(document.body))?n.on("desktop:enter",function(){c.init(u.find("#project-sidebar"),u,h)}):t(function(){c.init(u.find("#project-sidebar"),u,h)}),t(function(){u.find("#project-header-main").picturefill()}),o.init(u),this.message=new r,this.message.setContext(u.find(".js-message")),v.html(f({url:document.location.href,title:document.title,no_pinterest:"no-use"===h.project.copyright.license})),d.init(v),l.init(g),this.collection=new s(h.project.id),this.collection.setContext(u.find(".js-collect"));var w=function(e,t){return function(){x[e]("viewing-all"),y.height(t)}},y=u.find("#object-tags"),x=u.find("#object-tags-see-all");y.length&&(y.prop("scrollHeight")>y.height()?(x.find(".viewing-less-copy").on("click",w("addClass",y[0].scrollHeight)),x.find(".viewing-more-copy").on("click",w("removeClass",y.height())),x.show()):y.height("auto")),this.report=new a(h.project.id,{CONSTANTS:p}),this.report.setContext(u.find(".js-report")),i.on("report:open",this.report.toggle,this.report),t(function(){var e=n.is("desktop");h.open_message&&e&&this.message.toggle(),h.open_collection&&e&&this.collection.toggle()}.bind(this))},destroy:function(){c.destroy("#project-popup"),this.message&&this.message.destroy(),this.collection&&this.collection.destroy(),this.report&&(this.report.destroy(),i.off(null,null,this.report))}}}),define("be/stats",["jquery","nbd/util/pipe","page_constants","lib/xhr"],function(e,t,n,i){"use strict";var o={project:"//"+n.BEHANCE_API_URL+"/v2/projects",user:"//"+n.BEHANCE_API_URL+"/v2/users"};return{get:function(e){return i({type:e.httpMethod,url:o[e.entity]+"/"+e.id+"/"+e.action+"?client_id="+n.CLIENT_ID}).then(e.callback)},view:function(e,t,n){return this.get({httpMethod:"POST",action:"view",entity:e,id:t,callback:n}),this},appreciate:function(e,t,n){return this.get({httpMethod:"POST",action:"appreciate",entity:e,id:t,callback:n}),this}}}),define("require/hgn!templates/appreciate",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div id="appreciated-on-content">'),i.b("\n"+n),i.b('  <div class="app-content app-date beicons beicons-appreciate">Appreciated on '),i.b(i.v(i.f("date",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/View/Appreciation",["jquery","moment","nbd/View","be/stats","hgn!templates/appreciate"],function(e,t,n,i,o){"use strict";var r=n.extend({id:0,init:function(e){this.id=e},render:function(e){e&&(this.$view=e,this.$sticker=this.$view.find("#appreciation-sticker"),this.$view.find(".following").hide(),i.view("project",this.id,function(e){e.appreciated_on>0?this.hide(e.appreciated_on):this.show()}.bind(this)))},show:function(){var t=this.$view.offset();this.$view.find("#appreciate-it").show().on("click",function(){t&&e("html").animate({scrollTop:t.top-200},600),this.$sticker.click()}.bind(this)),this.$sticker.addClass("icon-project-appreciate").one("click",this.appreciate.bind(this))},hide:function(e){this.$sticker.after(o({date:t.unix(e).format("MMMM Do, YYYY")}))},appreciate:function(){i.appreciate("project",this.id),this.$sticker.removeClass("icon-project-appreciate").addClass("icon-project-appreciate-thanks"),this.$view.find("#appreciate-it").hide(),e("#appreNum").text(+e("#appreNum").text()+1)}});return r}),function(e,t,n){var i=n(e),o=n(t),r=n.fancybox=function(){r.open.apply(this,arguments)},s=!1,a=navigator.userAgent.match(/msie/i),c=null;n.extend(r,{version:"2.0.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:200,minHeight:200,maxWidth:9999,maxHeight:9999,autoSize:!0,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!1 in t.documentElement||t,scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,modal:!1,loop:!0,ajax:{},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" '+(a?'allowtransparency="true""':"")+' scrolling="{scrolling}" src="{href}"></iframe>',swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){n.isArray(e)||(e=[e]),e.length&&(r.close(!0),r.opts=n.extend(!0,{},r.defaults,t),r.group=e,r._start(r.opts.index||0))},cancel:function(){r.coming&&!1===r.trigger("onCancel")||(r.coming=null,r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onabort=r.imgPreload.onerror=null))},close:function(e){r.cancel(),r.current&&!1!==r.trigger("beforeClose")&&(r.unbindEvents(),!r.isOpen||e&&!0===e[0]?(n(".fancybox-wrap").stop().trigger("onReset").remove(),r._afterZoomOut()):(r.isOpen=r.isOpened=!1,n(".fancybox-item").remove(),r.wrap.stop(!0).removeClass("fancybox-opened"),r.inner.css("overflow","hidden"),r.transitions[r.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(r.player.timer)},i=function(){t(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},o=function(){t(),n("body").unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")};r.player.isActive||e&&!1===e[0]?o():function(){r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":i,"onCancel.player beforeClose.player":o,"beforeLoad.player":t}),i(),r.trigger("onPlayStart"))}()},next:function(){r.current&&r.jumpto(r.current.index+1)},prev:function(){r.current&&r.jumpto(r.current.index-1)},jumpto:function(e){r.current&&(e=parseInt(e,10),r.group.length>1&&r.current.loop&&(e>=r.group.length?e=0:e<0&&(e=r.group.length-1)),void 0!==r.group[e]&&(r.cancel(),r._start(e)))},reposition:function(e){r.isOpen&&r.wrap.css(r._getPosition(e))},update:function(){r.isOpen&&(s||(c=setInterval(function(){s&&(s=!1,clearTimeout(c),r.current&&(r.current.autoSize&&(r.inner.height("auto"),r.current.height=r.inner.height()),r._setDimension(),r.current.canGrow&&r.inner.height("auto"),r.reposition(),r.trigger("onUpdate")))},100)),s=!0)},toggle:function(){r.isOpen&&(r.current.fitToView=!r.current.fitToView,r.update())},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){r.hideLoading(),n('<div id="fancybox-loading"></div>').click(r.cancel).appendTo("body")},getViewport:function(){return{x:i.scrollLeft(),y:i.scrollTop(),w:i.width(),h:i.height()}},unbindEvents:function(){r.wrap&&r.wrap.unbind(".fb"),o.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var e=r.current,t=e.keys;e&&(i.bind("resize.fb, orientationchange.fb",r.update),t&&o.bind("keydown.fb",function(e){var i;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||!(n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])<0)||(i=e.keyCode,n.inArray(i,t.close)>-1?(r.close(),e.preventDefault()):n.inArray(i,t.next)>-1?(r.next(),e.preventDefault()):n.inArray(i,t.prev)>-1&&(r.prev(),e.preventDefault()))}),n.fn.mousewheel&&e.mouseWheel&&r.group.length>1&&r.wrap.bind("mousewheel.fb",function(e,t){var i=n(e.target).get(0);0!==i.clientHeight&&i.scrollHeight!==i.clientHeight||(e.preventDefault(),r[t>0?"prev":"next"]())}))},trigger:function(e){var t,i=r[n.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(i){if(n.isFunction(i[e])&&(t=i[e].apply(i,Array.prototype.slice.call(arguments,1))),!1===t)return!1;i.helpers&&n.each(i.helpers,function(t,o){o&&void 0!==r.helpers[t]&&n.isFunction(r.helpers[t][e])&&r.helpers[t][e](o,i)}),n.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t,i,o,s,a={},c=r.group[e]||null;if("object"==typeof c&&(c.nodeType||c instanceof n)&&(t=!0,n.metadata&&(a=n(c).metadata())),a=n.extend(!0,{},r.opts,{index:e,element:c},n.isPlainObject(c)?c:a),n.each(["href","title","content","type"],function(e,i){a[i]=r.opts[i]||t&&n(c).attr(i)||a[i]||null}),"number"==typeof a.margin&&(a.margin=[a.margin,a.margin,a.margin,a.margin]),a.modal&&n.extend(!0,a,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),r.coming=a,!1===r.trigger("beforeLoad"))return void(r.coming=null);o=a.type,i=a.href,o||(t&&!(s=n(c).data("fancybox-type"))&&c.className&&(s=c.className.match(/fancybox\.(\w+)/),o=s?s[1]:null),!o&&i&&(r.isImage(i)?o="image":r.isSWF(i)?o="swf":i.match(/^#/)&&(o="inline")),o||(o=t?"inline":"html"),a.type=o),"inline"===o||"html"===o?(a.content=a.content||("inline"===o&&i?n(i):c),a.content.length||(o=null)):(a.href=i||c,a.href||(o=null)),a.group=r.group,"image"===o?r._loadImage():"ajax"===o?r._loadAjax():o?r._afterLoad():r._error("type")},_error:function(e){n.extend(r.coming,{type:"html",autoSize:!0,minHeight:"0",hasError:e,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){r.imgPreload=new Image,r.imgPreload.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width,r.coming.height=this.height,r._afterLoad()},r.imgPreload.onerror=function(){this.onload=this.onerror=null,r._error("image")},r.imgPreload.src=r.coming.href,r.imgPreload.complete||r.showLoading()},_loadAjax:function(){r.showLoading(),r.ajaxLoad=n.ajax(n.extend({},r.coming.ajax,{url:r.coming.href,error:function(e,t){"abort"!==t?r._error("ajax",e):r.hideLoading()},success:function(e,t){"success"===t&&(r.coming.content=e,r._afterLoad())}}))},_preload:function(){var e=r.group,t=r.current.index,i=function(e){e&&r.isImage(e)&&((new Image).src=e)};e.length>1&&(i(n(e[t+1]||e[0]).attr("href")),i(n(e[t-1]||e[e.length-1]).attr("href")))},_afterLoad:function(){if(r.hideLoading(),!r.coming||!1===r.trigger("afterLoad",r.current))return void(r.coming=!1);r.isOpened?(n(".fancybox-item").remove(),r.wrap.stop(!0).removeClass("fancybox-opened"),r.inner.css("overflow","hidden"),r.transitions[r.current.prevMethod]()):(n(".fancybox-wrap").stop().trigger("onReset").remove(),r.trigger("afterClose")),r.unbindEvents(),r.isOpen=!1,r.current=r.coming,r.coming=!1,r.wrap=n(r.current.tpl.wrap).addClass("fancybox-tmp "+r.current.wrapCSS).appendTo("body"),r.outer=n(".fancybox-outer",r.wrap).css("padding",r.current.padding+"px"),r.inner=n(".fancybox-inner",r.wrap),r._setContent(),r.trigger("beforeShow"),r._setDimension(),r.wrap.hide().removeClass("fancybox-tmp"),r.bindEvents(),r._preload(),r.transitions[r.isOpened?r.current.nextMethod:r.current.openMethod]()},_setContent:function(){var e,t,i=r.current,o=i.type;switch(o){case"inline":case"ajax":case"html":e=i.content,"inline"===o&&e instanceof n&&(e=e.show().detach(),e.parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),n(r.wrap).bind("onReset",function(){e.appendTo("body").hide()})),i.autoSize&&(t=n('<div class="fancybox-tmp"></div>').appendTo(n("body")).append(e),i.width=t.outerWidth(),i.height=t.outerHeight(!0),e=t.contents().detach(),t.remove());break;case"image":e=i.tpl.image.replace("{href}",i.href),i.aspectRatio=!0;break;case"swf":e=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href);break;case"iframe":e=i.tpl.iframe.replace("{href}",i.href).replace("{scrolling}",i.scrolling).replace("{rnd}",(new Date).getTime())}
n.inArray(o,["image","swf","iframe"])>-1&&(i.autoSize=!1,i.scrolling=!1),r.inner.append(e)},_setDimension:function(){var e,t,i=r.wrap,o=r.outer,s=r.inner,a=r.current,c=r.getViewport(),l=a.margin,u=2*a.padding,d=a.width+u,f=a.height+u,h=a.width/a.height,p=a.maxWidth,b=a.maxHeight,m=a.minWidth,v=a.minHeight;if(c.w-=l[1]+l[3],c.h-=l[0]+l[2],d.toString().indexOf("%")>-1&&(d=c.w*parseFloat(d)/100),f.toString().indexOf("%")>-1&&(f=c.h*parseFloat(f)/100),a.fitToView&&(p=Math.min(c.w,p),b=Math.min(c.h,b)),m=Math.min(d,m),v=Math.min(d,v),p=Math.max(m,p),b=Math.max(v,b),a.aspectRatio?(d>p&&(d=p,f=(d-u)/h+u),f>b&&(f=b,d=(f-u)*h+u),d<m&&(d=m,f=(d-u)/h+u),f<v&&(f=v,d=(f-u)*h+u)):(d=Math.max(m,Math.min(d,p)),f=Math.max(v,Math.min(f,b))),d=Math.round(d),f=Math.round(f),n(i.add(o).add(s)).width("auto").height("auto"),s.width(d-u).height(f-u),i.width(d),e=i.height(),d>p||e>b)for(;(d>p||e>b)&&d>m&&e>v;)f-=10,a.aspectRatio?(d=Math.round((f-u)*h+u))<m&&(d=m,f=(d-u)/h+u):d-=10,s.width(d-u).height(f-u),i.width(d),e=i.height();a.dim={width:d,height:e},a.canGrow=a.autoSize&&f>v&&f<b,a.canShrink=!1,a.canExpand=!1,d-u<a.width||f-u<a.height?a.canExpand=!0:(d>c.w||e>c.h)&&d>m&&f>v&&(a.canShrink=!0),t=e-u,r.innerSpace=t-s.height(),r.outerSpace=t-o.height()},_getPosition:function(e){var t=r.current,n=r.getViewport(),i=t.margin,o=r.wrap.width()+i[1]+i[3],s=r.wrap.height()+i[0]+i[2],a={position:"absolute",top:i[0]+n.y,left:i[3]+n.x};return t.fixed&&(!e||!1===e[0])&&s<=n.h&&o<=n.w&&(a={position:"fixed",top:i[0],left:i[3]}),a.top=Math.ceil(Math.max(a.top,a.top+(n.h-s)*t.topRatio))+"px",a.left=Math.ceil(Math.max(a.left,a.left+.5*(n.w-o)))+"px",a},_afterZoomIn:function(){var e=r.current;r.isOpen=r.isOpened=!0,r.wrap.addClass("fancybox-opened").css("overflow","visible"),r.update(),r.inner.css("overflow","auto"===e.scrolling?"auto":"yes"===e.scrolling?"scroll":"hidden"),(e.closeClick||e.nextClick)&&r.inner.css("cursor","pointer").bind("click.fb",e.nextClick?r.next:r.close),e.closeBtn&&n(e.tpl.closeBtn).appendTo(r.wrap).bind("click.fb",r.close),e.arrows&&r.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(r.wrap).bind("click.fb",r.prev),(e.loop||e.index<r.group.length-1)&&n(e.tpl.next).appendTo(r.wrap).bind("click.fb",r.next)),r.trigger("afterShow"),r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play())},_afterZoomOut:function(){r.trigger("afterClose"),r.wrap.trigger("onReset").remove(),n.extend(r,{group:{},opts:{},current:null,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),r.transitions={getOrigPosition:function(){var e,t,i=r.current.element,o={},s=50,a=50;return i&&i.nodeName&&n(i).is(":visible")?(e=n(i).find("img:first"),e.length?(o=e.offset(),s=e.outerWidth(),a=e.outerHeight()):o=n(i).offset()):(t=r.getViewport(),o.top=t.y+.5*(t.h-a),o.left=t.x+.5*(t.w-s)),o={top:Math.ceil(o.top)+"px",left:Math.ceil(o.left)+"px",width:Math.ceil(s)+"px",height:Math.ceil(a)+"px"}},step:function(e,t){var n,i,o;"width"!==t.prop&&"height"!==t.prop||(i=o=Math.ceil(e-2*r.current.padding),"height"===t.prop&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),i-=r.innerSpace*n,o-=r.outerSpace*n),r.inner[t.prop](i),r.outer[t.prop](o))},zoomIn:function(){var e,t,i=r.wrap,o=r.current,s=o.dim;"elastic"===o.openEffect?(t=n.extend({},s,r._getPosition(!0)),delete t.position,e=this.getOrigPosition(),o.openOpacity&&(e.opacity=0,t.opacity=1),i.css(e).show().animate(t,{duration:o.openSpeed,easing:o.openEasing,step:this.step,complete:r._afterZoomIn})):(i.css(n.extend({},s,r._getPosition())),"fade"===o.openEffect?i.fadeIn(o.openSpeed,r._afterZoomIn):(i.show(),r._afterZoomIn()))},zoomOut:function(){var e,t=r.wrap,n=r.current;"elastic"===n.closeEffect?("fixed"===t.css("position")&&t.css(r._getPosition(!0)),e=this.getOrigPosition(),n.closeOpacity&&(e.opacity=0),t.animate(e,{duration:n.closeSpeed,easing:n.closeEasing,step:this.step,complete:r._afterZoomOut})):t.fadeOut("fade"===n.closeEffect?n.closeSpeed:0,r._afterZoomOut)},changeIn:function(){var e,t=r.wrap,n=r.current;"elastic"===n.nextEffect?(e=r._getPosition(!0),e.opacity=0,e.top=parseInt(e.top,10)-200+"px",t.css(e).show().animate({opacity:1,top:"+=200px"},{duration:n.nextSpeed,complete:r._afterZoomIn})):(t.css(r._getPosition()),"fade"===n.nextEffect?t.hide().fadeIn(n.nextSpeed,r._afterZoomIn):(t.show(),r._afterZoomIn()))},changeOut:function(){var e=r.wrap,t=r.current,i=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened"),"elastic"===t.prevEffect?e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,complete:i}):e.fadeOut("fade"===t.prevEffect?t.prevSpeed:0,i)}},r.helpers.overlay={overlay:null,update:function(){var e,n,r;this.overlay.width(0).height(0),a?(n=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth),r=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e=n<r?i.width():n):e=o.width(),this.overlay.width(e).height(o.height())},beforeShow:function(e){this.overlay||(this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css||{background:"black"}).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",r.close),i.bind("resize.fb",n.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn||"fast",e.opacity||1))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||"fast",function(){n(this).remove()}),this.overlay=null}},r.helpers.title={beforeShow:function(e){var t,i=r.current.title;i&&(t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+i+"</div>").appendTo("body"),"float"===e.type&&(t.width(t.width()),t.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?r.inner:"outside"===e.type?r.wrap:r.outer))}},n.fn.fancybox=function(e){function t(e){var t,o,a=[],c=this.rel;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault(),o=n(this).data("fancybox-group"),void 0!==o?t=!!o&&"data-fancybox-group":c&&""!==c&&"nofollow"!==c&&(o=c,t="rel"),t&&(a=s.length?n(s).filter("["+t+'="'+o+'"]'):n("["+t+'="'+o+'"]')),a.length?(i.index=a.index(this),r.open(a.get(),i)):r.open(this,i))}var i=e||{},s=this.selector||"";return s?o.undelegate(s,"click.fb-start").delegate(s,"click.fb-start",t):n(this).unbind("click.fb-start").bind("click.fb-start",t),this}}(window,document,jQuery),define("jquery/plugins/jquery.fancybox",function(){}),define("project/lib/highdef",["jquery","jquery/plugins/jquery.fancybox"],function(e){"use strict";var t={padding:0,loop:!0,nextEffect:"fade",prevEffect:"fade",title:"",helpers:{title:{type:"outside"}},tpl:{closeBtn:'<div title="Close" class="fancybox-item close right popup-close popup-icon-close beicons beicons-x"></div>'}},n=function(){var t,n=e(this),i=n.data("hd-src"),o=n.attr("original")||n.attr("src");return i||(~(t=o.lastIndexOf("/"))?o.substring(0,t+1)+"hd_"+o.substring(t+1):o)},i=function(){e(this).attr("data-fancybox-group","gallery").attr("href",n.call(this)).fancybox(t)};return e.fn.highdef=function(){return this.each(i),["-moz-zoom-in","-webkit-zoom-in","zoom-in",'url("/assets/img/site/-ie-zoom-in.cur"), pointer, hand'].forEach(function(e){this.css("cursor",e)},this),this}}),define("require/hgn!templates/html",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b(i.t(i.f("html",e,t,0))),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/mature",["nbd/util/extend","hgn!templates/html","vendor/history"],function(e,t,n){"use strict";var i={"restricted-safe":[{label:"Turn off Safe Browsing",classes:["form-button-default","form-submit"]},{label:"Cancel",classes:["form-button-cancel"]}]};return{mustache:t,templateData:function(){var t=e({classes:["mature-blocker","safe"]},this._model.data());return t.buttons=i[t.access],t},rendered:function(){this.$view.on("click",".form-submit",function(){this.Controller.disableSafeBrowsing().then(this.hide.bind(this)).then(this.destroy.bind(this))}.bind(this)).filter(".blocking-div").on("click",function(e){e.stopImmediatePropagation()}),this._super()}}}),define("project/Controller/MatureContent",["lib/xhr","be/Controller/Dialog","be/View/Dialog/Layover","be/View/Popup","project/trait/mature","page_constants"],function(e,t,n,i,o,r){"use strict";var s=i.extend(o),a=n.extend(o),c=t.extend({render:function(){this.View&&(this.View.render(document.body),this.View.position())},disableSafeBrowsing:function(){return e({type:"DELETE",url:r.BROWSING_URL}).then(function(e){window.location.reload()},console.error)}},{VIEW_CLASS:{phone:a,tablet:s,desktop:s}});return c}),define("require/hgn!templates/project/matureLogin",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="mature-message">'),i.b("\n"+n),i.b('  You must log in or sign up for Behance<br class="hide-phone">'),i.b("\n"+n),i.b("  to view projects containing adult content."),i.b("\n"+n),i.s(i.f("login",e,t,1),e,t,0,150,162,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<button0",e,t,""))}),e.pop()),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.b('<div class="popup-buttons">'),i.b("\n"+n),i.b('  Don\'t Have an Account? <a class="signup js-adobeid-signup">Sign up for Behance</a>'),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<button0":{name:"button",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("project/Controller/MatureLogin",["be/Controller/Dialog","be/View/Dialog/Layover","be/View/Popup","vendor/history","hgn!templates/project/matureLogin"],function(e,t,n,i,o){"use strict";var r={mustache:o,hide:function(){i.back()}},s=n.extend(r),a=t.extend(r),c=e.extend({render:function(){this.View&&(this.View.render(document.body),this.View.position())}},{VIEW_CLASS:{phone:a,tablet:s,desktop:s}});return c}),define("project/lib/mature",["project/Controller/MatureContent","project/Controller/MatureLogin"],function(e,t){"use strict";return{init:function(n,i,o){if(i.project.mature_content){var r,s;if("logged-out"===i.project.mature_access)r=new t({classes:["mature-blocker","log-in"],login:{classes:["form-button-default","form-button-large","js-adobeid-signin"],label:"Log In"}});else{if(!(s=o.MATURE_ACCESS[i.project.mature_access]))return;r=new e(n,{html:s,access:i.project.mature_access})}r.render(),this.popup=r}},destroy:function(){this.popup&&this.popup.destroy()}}}),define("project/lib/embed",["jquery","nbd/util/async"],function(e,t){"use strict";var n=function(){var n=e(this).removeAttr("allowscriptaccess"),i=n.closest(".module");"transparent"!==n.attr("wmode")&&(i.height(i.height()),n.attr("wmode","transparent").hide(),t(function(){n.show()}))},i=function(){return this.each(n)};return i.init=function(t){e("#primary-project-content .module embed",t).embedFix()},e.fn.embedFix=i}),define("project/lib/video",["jquery"],function(e){"use strict";function t(t){t.each(function(){var t=e(this),n=t.html();t.html(n.replace(/http(\:|%)/g,"https$1"))})}return{replaceProtocol:t}}),define("project/content",["jquery","nbd/util/async","lib/scrollpoint","project/View/Appreciation","project/lib/highdef","project/lib/mature","project/lib/embed","project/lib/video"],function(e,t,n,i,o,r,s,a){"use strict";return{init:function(n,o,s){r.init(o.project.id,o,s),this.appreciate=new i(o.project.id),this.appreciate.render(n.find("#appreciation")),t(function(){this.lazyload(n)}.bind(this)),n.find(".module.embed embed").embedFix(),a.replaceProtocol(e(".module.video")),n.is(".hd_images_enabled")&&n.find(".hd_avail").highdef()},lazyload:function(t){var i=t.find(".module.image img:not(.lazy-load):last").offset()||t.find(".module.image img.lazy-load:first").offset(),o=t.closest(".popup");i&&n(i.top-t.offset().top-window.innerHeight,function(){t.find(".module.image img.lazy-load").each(function(){var t=e(this);t.attr("src",t.attr("original")).css("opacity",0).one("load",function(){t.animate({opacity:1},150),t.removeClass("lazy-load")})})},o.length?"#project-popup":"window")},destroy:function(){this.appreciate&&this.appreciate.destroy(),r.destroy()}}}),define("require/hgn!templates/comment",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<li class="comment-container" data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b("\n"+n),i.b('  <a class="comment-img-link" href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b("\n"+n),i.b('    <img class="comment-img" src="'),i.b(i.v(i.d("user.images.50",e,t,0))),i.b('">'),i.b("\n"+n),i.b("  </a>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="comment-content-wrap">'),i.b("\n"+n),i.b('    <div class="comment-user-info">'),i.b("\n"+n),i.b('      <a class="comment-username-link" href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b(i.v(i.d("user.display_name",e,t,0))),i.b("</a>"),i.b("\n"+n),i.s(i.f("replied_to",e,t,1),e,t,0,341,429,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('        <span>replied to <a href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b(i.v(i.d("user.display_name",e,t,0))),i.b("</a></span>"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.b('      <span class="comment-date">'),i.b(i.v(i.f("time_ago",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="comment-text-wrap">'),i.b("\n"+n),i.b('      <div class="comment-text">'),i.b(i.t(i.f("comment",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.s(i.d("permissions.close",e,t,1),e,t,0,637,715,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <a class="comment-delete beicons-x beicons js-delete" href=""></a>'),i.b("\n"+n)}),e.pop()),i.b("  </div>"),i.b("\n"+n),i.b("</li>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/Comment",["jquery","nbd/View/Entity","nbd/util/pipe","hgn!templates/comment"],function(e,t,n,i){"use strict";var o={3000:"close"},r=t.extend({template:n(i,e),templateData:function(){var e=this._super();return e.permissions=e.permissions.reduce(function(e,t){return e[o[t]]=!0,e},{}),e},rendered:function(){this.$view.hide().fadeIn().on("click",".comment-close",function(){this.$view.fadeOut(this.trigger.bind(this,"destroy"))}.bind(this))}});return r}),define("be/Controller/Comment",["nbd/Controller/Entity","nbd/Model","be/View/Comment","nbd/trait/pubsub"],function(e,t,n,i){"use strict";var o=e.extend({id:function(){return this.Model&&this.Model.id()},_initView:function(){this._super.apply(this,arguments),this.listenTo(this.View,"all",this.trigger)},destroy:function(){this.stopListening(),this._super()}},{MODEL_CLASS:t,VIEW_CLASS:n}).mixin(i);return o}),define("lib/loadmore",["jquery","nbd/Class","nbd/util/construct","nbd/util/extend"],function(e,t,n,i){"use strict";var o=t.extend({loading:!1,moreSelector:".see-more-button-container",init:function(t,n,i){this.data=n||{},this.callback=i,this.loading=!1,this.$content=t,this.$more=e(this.moreSelector,this.data.$pagination),this.get=this.more.bind(this,void 0),this.$more.on("click",this.get),this.before()},set:function(e){return i(this.data,e),this},destroy:function(){this.$more.off("click",this.get)},load:function(t){return e.ajax({data:e.extend({},this.data,t)})},more:function(e){return this.loading=!0,this.load(e).then(this.render.bind(this)).done(this.after.bind(this)).done(this.callback)},render:function(t){return this.loading=!1,t.html?e(t.html).appendTo(this.$content):t},before:function(){},after:function(){}},{init:function(){return n.apply(this,arguments)}});return o}),define("be/comments",["jquery","be/Controller/Comment","lib/loadmore","nbd/trait/pubsub"],function(e,t,n,i){"use strict";return n.extend({_posts:[],destroy:function(){this.stopListening(),this.clear(),this._super()},load:function(t){return e.ajax({url:"/comments/"+this.data.type,data:e.extend({sort_order:"desc"},this.data,t)})},render:function(e){var t;return e&&e.comments&&(t=e.comments.map(this._makePost,this),this._posts=this._posts.concat(t)),this._posts["asc"===this.data.order?"reduceRight":"reduce"](function(e,t){return t.render(e.$content),e},this),e},after:function(){this.data.offset=this._posts.length?this._posts[this._posts.length-1].id():void 0},_makePost:function(e){var n=new t(e.id,e);return this.listenTo(n,"destroy",this.remove.bind(this,n)),n},add:function(e){var n=e instanceof t?e:this._makePost(e);this._posts.unshift(n),this.render()},remove:function(t){var n;~(n=this._posts.indexOf(t))&&(e.ajax({type:"delete",url:"/comments/"+this.data.type+"?comment_id="+t.id()}),this._posts.splice(n,1),t.destroy())},clear:function(){return this._posts.forEach(function(e){e.destroy()}),this._posts=[],this}}).mixin(i)}),define("ccn/View/Comment",["moment","be/View/Comment","nbd/util/extend"],function(e,t,n){"use strict";return t.extend({templateData:function(){var t=this._model.data();return n({time_ago:e.unix(t.created_on).fromNow()},t)},rendered:function(){this.$view.hide().fadeIn().on("click",".js-delete",function(e){e.preventDefault(),this.$view.fadeOut(this.trigger.bind(this,"destroy"))}.bind(this))}})}),define("ccn/Controller/Comment",["be/Controller/Comment","ccn/View/Comment"],function(e,t){"use strict";return e.extend({},{VIEW_CLASS:t})}),define("ccn/comments",["jquery","lib/xhr","be/comments","ccn/Controller/Comment"],function(e,t,n,i){"use strict";return n.extend({url:"/comments",hasMore:!0,load:function(n){return t({url:this.url,data:e.extend({},this.data,n)})},more:function(e){if(this.hasMore){var t=this.load(e).then(this.render.bind(this));return t.then(this.after.bind(this)),t.then(this.callback),t}},after:function(e){e.more||(this.hasMore=!1),this.data.page++},_makePost:function(e){var t=new i(e.id,e);return this.listenTo(t,"destroy",this.remove.bind(this,t)),t},add:function(e){var t=e instanceof i?e:this._makePost(e);this._posts.unshift(t),this.render()},remove:function(e){var n=this._posts.indexOf(e);if(~n)return t({type:"delete",url:"/comments?comment_id="+e.id()+"&entity_id="+this.data.entity_id}).then(this._posts.splice(n,1)).then(e.destroy())}})}),function(e){e.fn.simpleCounter=function(t){return this.each(function(){var n=e(this),i=!1,o=n.attr("class").split(" "),r={max:255,warn:10,strict:!0,truncate:!0,direction:"down",downAppendString:"characters left",upAppendString:"characters",normalStyle:"counter-normal",warnStyle:"counter-warn",maxStyle:"counter-max"},s=[e.ui.keyCode.BACKSPACE,e.ui.keyCode.DELETE,e.ui.keyCode.CONTROL,e.ui.keyCode.SHIFT,e.ui.keyCode.UP,e.ui.keyCode.DOWN,e.ui.keyCode.LEFT,e.ui.keyCode.RIGHT,e.ui.keyCode.HOME,e.ui.keyCode.END,e.ui.keyCode.PAGE_UP,e.ui.keyCode.PAGE_DOWN,e.ui.keyCode.PAGE_DOWN],a=function(){var e=n.val().length;"down"==r.direction?i.text(r.max-e+" "+r.downAppendString):i.text(e+" "+r.upAppendString),l(e)},c=function(){var e=n.val().length;"down"==r.direction?i.text(r.max-e+" "+r.downAppendString):i.text(e+" "+r.upAppendString),l(e)},l=function(e){e>=r.max?(i.addClass(r.maxStyle).removeClass(r.warnStyle).removeClass(r.normalStyle),n.trigger("simplecounter-max")):e>=r.max-r.warn?(i.addClass(r.warnStyle).removeClass(r.normalStyle).removeClass(r.maxStyle),n.trigger("simplecounter-warn")):(i.addClass(r.normalStyle).removeClass(r.warnStyle).removeClass(r.maxStyle),n.trigger("simplecounter-normal"))},u=function(){n.val(n.val().substring(0,r.max))},d=function(t){n.val().length>=r.max&&r.strict&&r.truncate&&!0!==t&&-1==e.inArray(t.keyCode,s)&&u(),a()},f=function(t){if(-1==e.inArray(t.keyCode,s)&&r.strict&&n.val().length>=r.max)return r.truncate&&(u(),a()),!1};e.each(o,function(e,t){if(t.match(/validate\[(?:[^,]*|.*,)length\[([0-9]+),([0-9]+)\].*\]/i))return void(r.max=t.replace(/validate\[(?:[^,]*|.*,)length\[([0-9]+),([0-9]+)\].*\]/i,"$2"))}),r=e.extend({},r,t),i=r.$counter?r.$counter:e("#"+n.attr("id")+"-counter"),i.length&&("down"==r.direction?i.text(r.max+r.downAppendString):i.text("0"+r.upAppendString),d(!0),n.bind("keyup",d),n.bind("keydown",f),n.bind("alter",c))}),this}}(jQuery),define("jquery/plugins/jquery.simpleCounter",function(){}),define("project/lib/comments",["jquery","ccn/comments","be/trait/form","nbd/util/media","nbd/util/async","jquery/plugins/jquery.simpleCounter"],function(e,t,n,i,o){"use strict";return{more:!0,$context:"",init:function(t,n){this.$context=t,this.$view=t.find("#post-comment-block");var r,s=n.project.id,a=t.find("#comment");o(function(){a.simpleCounter()}),r=this.view(s,t),this.create(s,r),o(function(){n.open_comments&&i.is("desktop")&&e(window).scrollTop(e("#project-comments").offset().top)}.bind(this))},destroy:function(){this.$view&&this.$view.remove()},view:function(e,n){var i=n.find("#comments-pagination"),o=t.init(n.find("#comments-list"),{entity_id:e,page:1},function(){o.hasMore?i.removeClass("hide"):i.addClass("hide")});return o.get(),o},create:function(e,t){function i(e){if(!e.id||!e.user)throw e;t.add({id:e.id,user:e.user,comment:o,posted_on:"Just now",permissions:{close:"true"}})}var o;n.onSubmit.call(this,function(t){return t.entity_id=e,o=t.comment,this.then(i),this})}}}),define("require/hgn!templates/project/info",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="project-info">'),i.b("\n"+n),i.b('  <div class="menu-group">'),i.b("\n"+n),i.b('    <h2 class="menu-title">'),i.b("\n"+n),i.b("      Project Info"),i.b("\n"+n),i.b("    </h2>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Created:</span> '),i.b(i.v(i.f("created_on",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Last Edited:</span> '),i.b(i.v(i.f("modified_on",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">About:</span> '),i.b(i.v(i.f("description",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Tools:</span>'),i.b("\n"+n),i.s(i.f("tools",e,t,1),e,t,0,520,565,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>"),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Tags:</span>'),i.b("\n"+n),i.s(i.f("tags",e,t,1),e,t,0,678,723,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>"),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="menu-group">'),i.b("\n"+n),i.b('    <h2 class="menu-title">'),i.b("\n"+n),i.b("      Copyright Info"),i.b("\n"+n),i.b("    </h2>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.s(i.f("copyright",e,t,1),e,t,0,891,922,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("      "),i.b(i.t(i.f("description",e,t,0))),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="menu-section">'),i.b("\n"+n),i.b('    <a class="report">Report</a>'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b("</div> \x3c!-- /project-info --\x3e"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/info",["moment","nbd/util/extend","hgn!templates/project/info"],function(e,t,n){"use strict";return{mustache:n,templateData:function(){var n=t({title:"Project Info",classes:["project-info"]},this._model.data()),i=this._model.get("constants").LICENSE_TEXTS;return["created_on","modified_on"].forEach(function(t){n[t]=e.unix(n[t]).format("M/D/YY")}),n.copyright.description=i[n.copyright.license],n},rendered:function(){this._super(),this.$view.on("click",".report",function(){this.hide(),this.Controller.report()}.bind(this))}}}),define("project/Controller/Info",["be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Menu","project/trait/info","nbd/event"],function(e,t,n,i,o){"use strict";var r=e.extend({report:function(){o.trigger("report:open",this.$source)},render:function(e){this.$source=e,this._super(e)}},{VIEW_CLASS:{phone:t.extend(i),tablet:n.extend(i)}});return r}),define("project/footer",["jquery","nbd/util/async","project/lib/comments","project/Controller/Info"],function(e,t,n,i){"use strict";return{init:function(o,r,s){var a=e.extend({},r,{constants:s});this.info=new i(r.project.id,a),this.info.setContext(o.find(".js-info")),t(function(){n.init(o,r)})},destroy:function(){this.info&&this.info.destroy()}}}),define("be/View/Dialog/Popup",["nbd/util/extend","be/View/Dialog","lib/keyboard"],function(e,t,n){"use strict";var i=t.extend({template:function(t){return this._super(e({dialogType:"desktop",blocking:!0,toolbar:!0},t))},render:function(){return i.Z_INDEX+=2,this._zIndex=i.Z_INDEX,this._super.apply(this,arguments)},rendered:function(){this._super(),this.$view.filter(".blocking-div").on("click",this.hide.bind(this))},position:function(){if(this.$view){var e=this.$view.filter(".popup"),t=window.innerHeight||document.documentElement.offsetHeight,n=(t-e.outerHeight())/2;e.css({"z-index":this._zIndex,"margin-left":-~~(e.width()/2)+"px",top:Math.max(0,n)}).addClass("shown"),this.$view.filter(".blocking-div").css("z-index",this._zIndex-1)}},show:function(){if(this.$view)return n.on({escape:this.hide.bind(this)}),this.$view.parent().is(document.body)||this.$view.appendTo(document.body),this._super()},hide:function(){if(this.$view)return n.off(),this.$view.detach(),this._super()},toggle:function(){return this[this.$view.parent().is(document.body)?"hide":"show"]()}},{Z_INDEX:250});return i}),define("be/Modal",["nbd/trait/promise","nbd/util/extend","be/Controller/Dialog","be/View/Dialog/Layover","be/View/Dialog/Popup","hgn!templates/html"],function(e,t,n,i,o,r){"use strict";var s={mustache:r,templateData:function(){return t({buttons:[{label:"Okay",classes:["form-button-default","js-confirm"]},{label:"Cancel",classes:["form-button-cancel","js-cancel"]}]},this._model.data())},rendered:function(){this._super(),this.$view.on("click",".js-confirm",this.trigger.bind(this,"confirm")).on("click",".js-cancel",this.trigger.bind(this,"cancel"))}},a=i.extend(s),c=o.extend(s);return n.extend({init:function(){this._super.apply(this,arguments),this._view.on("confirm",function(){this.confirm.apply(this,arguments)},this).on("hide",function(){this.cancel.apply(this,arguments)},this)},confirm:function(){this.resolve()},cancel:function(){this.reject()},render:function(){this._super(document.body),this._view.position()}},{VIEW_CLASS:{phone:a,tablet:c,desktop:c}}).mixin(e)}),define("be/modal/simple",["be/Modal"],function(e){"use strict";return function(t,n){var i=new e(t),o=i.destroy.bind(i);return"function"==typeof n&&(i.confirm=function e(){function t(){e.blocking=!1}if(!e.blocking){e.blocking=!0;var o=n();o&&"function"==typeof o.then?o.then(i.resolve.bind(i)).then(t,t):(i.resolve(o),t())}}),i.render(),i.then(o,o),i}}),define("require/hgn!templates/gallery/unverified",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="unverified-modal-content">'),i.b("\n"+n),i.b('  <div class="unverified-message">'),i.b("\n"+n),i.b("    Your project is currently not visible publicly because your account"),i.b("\n"+n),i.b("    is unverified."),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="verify-warning notice-box">'),i.b("\n"+n),i.b('    <p class="verify-warning-body">'),i.b("\n"+n),i.b("      Please check your inbox and verify your email address."),i.b("\n"+n),i.b("      Haven't received a verification email yet?"),i.b("\n"+n),i.b("      <br />"),i.b("\n"+n),i.b('      <a href="'),i.b(i.v(i.f("verification_url",e,t,0))),i.b('">Click here</a>.'),i.b("\n"+n),i.b("    </p>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/lib/startup",["log","be/modal/simple","hgn!templates/gallery/unverified"],function(e,t,n){"use strict";return e=e.get("project/lib/startup"),{init:function(e){e.unverified&&t({title:"Your project is private",classes:["unverified-modal"],html:n({verification_url:e.verification_url,email:e.email})})}}}),require(["jquery","nbd/util/media","responsive","be/follow","lib/social","project/sidebar","project/content","project/footer","project/lib/startup","vendor/history","page_config","page_constants","hgn!templates/project/viralIcons"],function(e,t,n,i,o,r,s,a,c,l,u,d,f){"use strict";var h=e(document.body),p=window.location.href,b=h.find("#share-container");n.init(),i.init(),r.init(h,u,d),s.init(h.find(".js-primary-project-content"),u,d),a.init(h.find("#project-footer"),u,d),c.init(u),b.html(f({url:document.location.href,title:document.title,no_pinterest:"no-use"===u.project.copyright.license})),o.init(b),e(window).on("popstate",function(e){if(e.originalEvent){var t=l.getState();p!==t.url&&window.location.replace(t.url)}}).trigger("scroll")}),define("gallery",function(){});